<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Translator - Einstellungen</title>
  <style>
    /* === Material Design Farbvariablen === */
    :root {
      --md-primary: #1565C0;
      --md-primary-dark: #0D47A1;
      --md-primary-light: #E3F2FD;
      --md-primary-text: #FFFFFF;
      
      --md-accent: #E64A19;
      --md-success: #2E7D32;
      --md-success-light: #E8F5E9;
      --md-error: #C62828;
      --md-error-light: #FFEBEE;
      --md-warning: #EF6C00;
      --md-warning-light: #FFF3E0;
      
      --md-surface: #FFFFFF;
      --md-background: #F5F5F5;
      --md-on-surface: #212121;
      --md-on-surface-medium: #616161;
      --md-on-surface-disabled: #9E9E9E;
      --md-divider: #E0E0E0;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--md-background);
      color: var(--md-on-surface);
      line-height: 1.6;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    header h1 {
      font-size: 28px;
      font-weight: 700;
      color: var(--md-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    header h1 svg {
      width: 32px;
      height: 32px;
      fill: currentColor;
    }

    header p {
      color: var(--md-on-surface-medium);
      margin-top: 8px;
    }

    .card {
      background: var(--md-surface);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .card h2 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--md-divider);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card h2 svg {
      width: 20px;
      height: 20px;
      fill: var(--md-primary);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    .form-group label {
      display: block;
      font-weight: 500;
      margin-bottom: 6px;
      color: var(--md-on-surface);
    }

    .form-group .description {
      font-size: 13px;
      color: var(--md-on-surface-medium);
      margin-bottom: 8px;
    }

    input[type="text"],
    input[type="url"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--md-divider);
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--md-primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .toggle-group {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      background: var(--md-surface);
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .toggle-group:last-child {
      margin-bottom: 0;
    }

    .toggle-info {
      flex: 1;
    }

    .toggle-info .label {
      font-weight: 500;
      color: var(--md-on-surface);
    }

    .toggle-info .desc {
      font-size: 12px;
      color: var(--md-on-surface-medium);
      margin-top: 2px;
    }

    .toggle {
      position: relative;
      width: 48px;
      height: 26px;
      flex-shrink: 0;
      margin-left: 16px;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--md-divider);
      border-radius: 26px;
      transition: 0.3s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.3s;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .toggle input:checked + .toggle-slider {
      background: var(--md-primary);
    }

    .toggle input:checked + .toggle-slider:before {
      transform: translateX(22px);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--md-primary), var(--md-primary-dark));
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
    }

    .btn-secondary {
      background: var(--md-background);
      color: var(--md-on-surface);
      border: 1px solid var(--md-divider);
    }

    .btn-secondary:hover {
      background: var(--md-divider);
    }

    .btn-danger {
      background: var(--md-error-light);
      color: var(--md-error);
    }

    .btn-danger:hover {
      background: var(--md-error-light);
    }

    .btn svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid var(--md-divider);
    }

    .status {
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .status.success {
      display: block;
      background: var(--md-success-light);
      color: var(--md-success);
      border: 1px solid var(--md-success-light);
    }

    .status.error {
      display: block;
      background: var(--md-error-light);
      color: var(--md-error);
      border: 1px solid var(--md-error-light);
    }

    .shortcut-list {
      background: var(--md-surface);
      border-radius: 8px;
      padding: 16px;
    }

    .shortcut-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--md-divider);
    }

    .shortcut-item:last-child {
      border-bottom: none;
    }

    .shortcut-item kbd {
      background: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 13px;
      border: 1px solid var(--md-divider);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .test-section {
      background: var(--md-surface);
      border-radius: 8px;
      padding: 16px;
    }

    .test-section input {
      margin-bottom: 10px;
    }

    .test-result {
      padding: 12px;
      background: white;
      border-radius: 6px;
      border: 1px solid var(--md-divider);
      min-height: 60px;
      font-size: 14px;
    }

    .test-result.error {
      border-color: var(--md-error-light);
      color: var(--md-error);
    }

    /* API Type Selector */
    .api-type-selector {
      display: flex;
      gap: 12px;
      margin-top: 8px;
    }

    .api-type-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 20px;
      border: 2px solid var(--md-divider);
      border-radius: 10px;
      background: var(--md-surface);
      color: var(--md-on-surface-medium);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .api-type-btn:hover {
      border-color: var(--md-primary-light);
      background: var(--md-primary-light);
      color: var(--md-primary);
    }

    .api-type-btn.active {
      border-color: var(--md-primary);
      background: linear-gradient(135deg, var(--md-primary-light), var(--md-primary-light));
      color: var(--md-primary);
      box-shadow: 0 2px 8px rgba(79, 70, 229, 0.15);
    }

    .api-type-btn svg {
      flex-shrink: 0;
    }

    .api-settings {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--md-divider);
    }

    .input-with-button {
      display: flex;
      gap: 8px;
    }

    .input-with-button input {
      flex: 1;
    }

    .btn-small {
      padding: 10px 12px;
      background: var(--md-background);
      border: 1px solid var(--md-divider);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-small:hover {
      background: var(--md-divider);
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .slider-container input[type="range"] {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: var(--md-divider);
      -webkit-appearance: none;
      appearance: none;
    }

    .slider-container input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--md-primary);
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);
    }

    .slider-value {
      min-width: 36px;
      padding: 4px 8px;
      background: var(--md-background);
      border-radius: 4px;
      font-size: 13px;
      font-weight: 600;
      text-align: center;
      color: var(--md-primary);
    }

    .info-box {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 12px 16px;
      background: var(--md-warning-light);
      border: 1px solid var(--md-warning);
      border-radius: 8px;
      font-size: 13px;
      color: var(--md-warning);
      margin-top: 16px;
    }

    .info-box svg {
      flex-shrink: 0;
      margin-top: 1px;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      color: var(--md-on-surface-disabled);
      font-size: 13px;
    }

    footer a {
      color: var(--md-primary);
      text-decoration: none;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --md-primary: #64B5F6;
        --md-primary-dark: #1565C0;
        --md-primary-light: #0D47A1;
        --md-surface: #2D2D2D;
        --md-background: #1E1E1E;
        --md-on-surface: #FFFFFF;
        --md-on-surface-medium: #BDBDBD;
        --md-on-surface-disabled: #757575;
        --md-divider: #404040;
        --md-success: #81C784;
        --md-success-light: #1B5E20;
        --md-error: #EF5350;
        --md-error-light: #B71C1C;
        --md-warning: #FFB74D;
        --md-warning-light: #E65100;
      }
      body { background: var(--md-background); color: var(--md-on-surface); }
      .card { background: var(--md-surface); }
      .card h2 { border-color: var(--md-divider); }
      .form-group label { color: var(--md-on-surface); }
      input, select, textarea { background: var(--md-background); border-color: var(--md-divider); color: var(--md-on-surface); }
      .toggle-group { background: var(--md-background); }
      .toggle-info .label { color: var(--md-on-surface); }
      .shortcut-list { background: var(--md-background); }
      .shortcut-item { border-color: var(--md-divider); }
      .shortcut-item kbd { background: var(--md-surface); border-color: var(--md-divider); color: var(--md-on-surface); }
      .test-section { background: var(--md-background); }
      .test-result { background: var(--md-surface); border-color: var(--md-divider); color: var(--md-on-surface); }
      .btn-secondary { background: var(--md-surface); color: var(--md-on-surface); border-color: var(--md-divider); }
      .actions { border-color: var(--md-divider); }
      .api-type-btn { background: var(--md-surface); border-color: var(--md-divider); color: var(--md-on-surface-medium); }
      .api-type-btn:hover { background: var(--md-divider); border-color: var(--md-primary); color: var(--md-primary); }
      .api-type-btn.active { background: var(--md-primary-light); border-color: var(--md-primary); color: var(--md-primary); }
      .api-settings { border-color: var(--md-divider); }
      .btn-small { background: var(--md-surface); border-color: var(--md-divider); }
      .btn-small:hover { background: var(--md-divider); }
      .slider-value { background: var(--md-surface); color: var(--md-primary); }
      .info-box { background: var(--md-warning-light); border-color: var(--md-warning); color: var(--md-warning); }
      .advanced-options { background: var(--md-background); border-color: var(--md-divider); }
      .advanced-options summary { color: var(--md-primary); }
      .domain-list { background: var(--md-background); }
      .domain-item { background: var(--md-surface); border-color: var(--md-divider); }
    }

    /* Domain List Styles */
    .domain-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 40px;
      padding: 12px;
      background: var(--md-surface);
      border-radius: 8px;
      border: 1px solid var(--md-divider);
    }

    .domain-list:empty::before {
      content: 'Keine Domains konfiguriert';
      color: var(--md-on-surface-disabled);
      font-size: 13px;
      font-style: italic;
    }

    .domain-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: white;
      border: 1px solid var(--md-divider);
      border-radius: 6px;
      font-size: 13px;
    }

    .domain-item span {
      color: var(--md-on-surface);
      font-family: monospace;
    }

    .domain-item button {
      background: none;
      border: none;
      color: var(--md-on-surface-disabled);
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .domain-item button:hover {
      color: var(--md-error);
      background: var(--md-error-light);
    }

    .domain-input-row {
      display: flex;
      gap: 8px;
    }

    .domain-input-row input {
      flex: 1;
    }

    /* Advanced Options Accordion */
    .advanced-options {
      margin-top: 16px;
      padding: 12px 16px;
      background: var(--md-surface);
      border: 1px solid var(--md-divider);
      border-radius: 8px;
    }

    .advanced-options summary {
      cursor: pointer;
      font-weight: 500;
      color: var(--md-primary);
      user-select: none;
      padding: 4px 0;
    }

    .advanced-options summary:hover {
      color: var(--md-primary-dark);
    }

    .advanced-options[open] summary {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--md-divider);
    }

    .advanced-options .toggle-group {
      margin-top: 12px;
    }

    .advanced-options .toggle-group:first-of-type {
      margin-top: 0;
    }

    @media (max-width: 600px) {
      .row { grid-template-columns: 1fr; }
      .actions { flex-direction: column; }
      .actions .btn { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>
        <svg viewBox="0 0 24 24">
          <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
        </svg>
        Smart Translator
      </h1>
      <p>Einstellungen und Konfiguration</p>
    </header>

    <div class="status" id="status"></div>

    <!-- API-Einstellungen -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
        API-Verbindung
      </h2>

      <!-- API-Typ Auswahl -->
      <div class="form-group">
        <label>API-Backend</label>
        <div class="description">W√§hlen Sie Ihren √úbersetzungsdienst</div>
        <div class="api-type-selector">
          <button type="button" class="api-type-btn active" data-type="libretranslate">
            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
            LibreTranslate
          </button>
          <button type="button" class="api-type-btn" data-type="lmstudio">
            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"/></svg>
            LM Studio (LLM)
          </button>
        </div>
      </div>

      <!-- LibreTranslate Einstellungen -->
      <div id="libretranslate-settings" class="api-settings">
        <div class="form-group">
          <label for="serviceUrl">LibreTranslate API URL</label>
          <div class="description">Die URL Ihres LibreTranslate-Servers</div>
          <input type="url" id="serviceUrl" placeholder="http://localhost:5000/translate">
        </div>

        <div class="form-group">
          <label for="apiKey">API-Schl√ºssel (optional)</label>
          <div class="description">Falls Ihr Server einen API-Schl√ºssel erfordert</div>
          <input type="text" id="apiKey" placeholder="Ihr API-Schl√ºssel">
        </div>
      </div>

      <!-- LM Studio Einstellungen -->
      <div id="lmstudio-settings" class="api-settings" style="display: none;">
        <div class="form-group">
          <label for="lmStudioUrl">LM Studio Server URL</label>
          <div class="description">IP und Port Ihres LM Studio Servers</div>
          <div class="input-with-button">
            <input type="url" id="lmStudioUrl" placeholder="http://192.168.178.45:1234">
            <button type="button" class="btn btn-small" id="refreshModelsBtn" title="Modelle laden">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="lmStudioModel">Modell</label>
          <div class="description">Das geladene Modell in LM Studio</div>
          <select id="lmStudioModel">
            <option value="">-- Modelle laden --</option>
          </select>
        </div>

        <div class="form-group">
          <label for="lmStudioContext">Fachkontext</label>
          <div class="description">Optimiert die √úbersetzung f√ºr spezifische Fachbereiche</div>
          <select id="lmStudioContext">
            <option value="general">üåê Allgemein</option>
            <option value="automotive">üöó Kfz / Automotive</option>
            <option value="technical">‚öôÔ∏è Technisch / IT</option>
            <option value="medical">üè• Medizin</option>
            <option value="legal">‚öñÔ∏è Recht / Juristisch</option>
            <option value="custom">üìù Eigener Prompt</option>
          </select>
        </div>

        <div class="form-group" id="customPromptGroup" style="display: none;">
          <label for="lmStudioCustomPrompt">Eigener System-Prompt</label>
          <div class="description">Definieren Sie Ihre eigenen √úbersetzungsregeln</div>
          <textarea id="lmStudioCustomPrompt" rows="4" placeholder="Du bist ein Fach√ºbersetzer f√ºr..."></textarea>
        </div>

        <div class="row">
          <div class="form-group">
            <label for="lmStudioTemperature">Temperatur</label>
            <div class="description">Niedriger = pr√§ziser</div>
            <div class="slider-container">
              <input type="range" id="lmStudioTemperature" min="0" max="1" step="0.1" value="0.1">
              <span class="slider-value" id="temperatureValue">0.1</span>
            </div>
          </div>
          <div class="form-group">
            <label for="lmStudioMaxTokens">Max Tokens</label>
            <div class="description">Maximale Antwortl√§nge</div>
            <input type="number" id="lmStudioMaxTokens" min="100" max="8000" step="100" value="2000">
          </div>
        </div>

        <!-- Erweiterte LLM Optionen -->
        <details class="advanced-options">
          <summary>Erweiterte Optionen</summary>
          
          <div class="toggle-group">
            <div class="toggle-info">
              <div class="label">Embedding-Modelle ausblenden</div>
              <div class="desc">Zeigt nur Chat-/Instruct-Modelle in der Modellauswahl</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="filterEmbeddingModels">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="toggle-group">
            <div class="toggle-info">
              <div class="label">√úbersetzung abbrechbar</div>
              <div class="desc">Erm√∂glicht das Abbrechen laufender LLM-Anfragen</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="enableAbortTranslation">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="toggle-group">
            <div class="toggle-info">
              <div class="label">Fallback auf LibreTranslate</div>
              <div class="desc">Nutzt LibreTranslate automatisch wenn LM Studio nicht erreichbar ist</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="enableLLMFallback">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </details>

        <div class="info-box">
          <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
          <span>LM Studio muss gestartet sein und der Server unter "Developer" aktiviert.</span>
        </div>
      </div>

      <!-- Verbindungstest -->
      <div class="test-section">
        <label>Verbindung testen</label>
        <input type="text" id="testInput" placeholder="Hello, world!" value="Hello, world!">
        <button class="btn btn-secondary" id="testBtn">
          <svg viewBox="0 0 24 24"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/></svg>
          Testen
        </button>
        <div class="test-result" id="testResult">Ergebnis erscheint hier...</div>
      </div>
    </div>

    <!-- Sprachen -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
        Sprachen
      </h2>

      <div class="row">
        <div class="form-group">
          <label for="sourceLang">Quellsprache</label>
          <select id="sourceLang">
            <option value="auto">Automatisch erkennen</option>
            <option value="en">Englisch</option>
            <option value="de">Deutsch</option>
            <option value="fr">Franz√∂sisch</option>
            <option value="es">Spanisch</option>
            <option value="it">Italienisch</option>
            <option value="pt">Portugiesisch</option>
            <option value="nl">Niederl√§ndisch</option>
            <option value="pl">Polnisch</option>
            <option value="ru">Russisch</option>
            <option value="zh">Chinesisch</option>
            <option value="ja">Japanisch</option>
            <option value="ko">Koreanisch</option>
            <option value="ar">Arabisch</option>
            <option value="tr">T√ºrkisch</option>
          </select>
        </div>
        <div class="form-group">
          <label for="targetLang">Zielsprache</label>
          <select id="targetLang">
            <option value="de">Deutsch</option>
            <option value="en">Englisch</option>
            <option value="fr">Franz√∂sisch</option>
            <option value="es">Spanisch</option>
            <option value="it">Italienisch</option>
            <option value="pt">Portugiesisch</option>
            <option value="nl">Niederl√§ndisch</option>
            <option value="pl">Polnisch</option>
            <option value="ru">Russisch</option>
            <option value="zh">Chinesisch</option>
            <option value="ja">Japanisch</option>
            <option value="ko">Koreanisch</option>
            <option value="ar">Arabisch</option>
            <option value="tr">T√ºrkisch</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Ausl√∂ser -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/></svg>
        Ausl√∂ser
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Auswahl-Icon anzeigen</div>
          <div class="desc">Zeigt ein kleines √úbersetzen-Icon neben markiertem Text</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="showSelectionIcon">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="selectionIconDelay">Icon-Verz√∂gerung (ms)</label>
        <div class="description">Zeit bis das Auswahl-Icon erscheint</div>
        <input type="number" id="selectionIconDelay" min="0" max="2000" step="50">
      </div>
    </div>

    <!-- Anzeige -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
        Anzeige
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Original anzeigen</div>
          <div class="desc">Zeigt den Originaltext im √úbersetzungs-Tooltip</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="showOriginalInTooltip">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Alternative √úbersetzungen</div>
          <div class="desc">Zeigt alternative √úbersetzungsm√∂glichkeiten an</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="showAlternatives">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="tooltipPosition">Tooltip-Position</label>
        <select id="tooltipPosition">
          <option value="below">Unterhalb</option>
          <option value="above">Oberhalb</option>
        </select>
      </div>
    </div>

    <!-- Seiten√ºbersetzung -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        Seiten√ºbersetzung
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Cache automatisch laden</div>
          <div class="desc">L√§dt gecachte √úbersetzungen automatisch beim Seitenaufruf</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="autoLoadCache">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">√úbersetzte Texte hervorheben</div>
          <div class="desc">Hebt √ºbersetzte Textabschnitte farblich hervor</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="highlightTranslated">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="bilingualPosition">Bilingual-Position</label>
        <div class="description">Wo die √úbersetzung im bilingualen Modus erscheint</div>
        <select id="bilingualPosition">
          <option value="below">Unterhalb des Originals</option>
          <option value="above">Oberhalb des Originals</option>
        </select>
      </div>
    </div>

    <!-- Auto-Translate Domains -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
        Automatische √úbersetzung
      </h2>

      <div class="form-group">
        <label>Domains automatisch √ºbersetzen</label>
        <div class="description">Seiten dieser Domains werden automatisch beim Laden √ºbersetzt</div>
        <div id="autoTranslateDomains" class="domain-list"></div>
        <div class="domain-input-row" style="margin-top: 12px;">
          <input type="text" id="newAutoTranslateDomain" placeholder="z.B. docs.example.com">
          <button type="button" id="addAutoTranslateDomain" class="btn-secondary">Hinzuf√ºgen</button>
        </div>
      </div>
    </div>

    <!-- Inhaltsfilter -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"/></svg>
        Inhaltsfilter
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Code-Bl√∂cke √ºberspringen</div>
          <div class="desc">Code, Pre, Kbd und Syntax-Highlighting nicht √ºbersetzen</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="skipCodeBlocks" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-group" style="margin-top: 16px;">
        <div class="toggle-info">
          <div class="label">Zitate √ºberspringen</div>
          <div class="desc">Blockquotes nicht √ºbersetzen</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="skipBlockquotes" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-group" style="margin-top: 16px;">
        <div class="toggle-info">
          <div class="label">Inline-Abst√§nde korrigieren</div>
          <div class="desc">F√ºgt Leerzeichen bei Tag-Wechseln ein (z.B. &lt;strong&gt;)</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="fixInlineSpacing" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Anzeige-Optionen -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
        Anzeige-Optionen
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Tabs f√ºr Alternativen</div>
          <div class="desc">Bei l√§ngeren Texten: Alternativen als Tabs anzeigen</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="useTabsForAlternatives">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="tabWordThreshold">Tabs ab Wortanzahl</label>
        <input type="number" id="tabWordThreshold" min="5" max="100" value="20" style="width: 80px;">
        <div class="desc" style="margin-top: 4px; font-size: 12px; color: var(--md-on-surface-medium);">
          Tabs werden erst ab dieser Wortanzahl angezeigt (Standard: 20)
        </div>
      </div>

      <div class="toggle-group" style="margin-top: 16px;">
        <div class="toggle-info">
          <div class="label">PDF vereinfacht exportieren</div>
          <div class="desc">Erzeugt sauberes, Wiki-√§hnliches Layout beim PDF-Export</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="simplifyPdfExport">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Token-Kosten (Experimentell) -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
        Token-Kosten <span style="font-size: 11px; color: var(--md-warning); font-weight: normal;">(Experimentell)</span>
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Kostenberechnung aktivieren</div>
          <div class="desc">Berechnet gesch√§tzte Kosten basierend auf Token-Verbrauch</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="enableTokenCost">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="tokenCostPer">Kosten pro Token-Einheit</label>
        <div class="row" style="gap: 12px; align-items: center;">
          <input type="number" id="tokenCostAmount" min="0.001" max="100" step="0.001" value="1" style="width: 100px;">
          <span style="color: var(--md-on-surface-medium);">Cent pro</span>
          <input type="number" id="tokenCostPer" min="100" max="1000000" step="100" value="10000" style="width: 120px;">
          <span style="color: var(--md-on-surface-medium);">Tokens</span>
        </div>
        <div class="desc" style="margin-top: 8px; font-size: 12px; color: var(--md-on-surface-medium);">
          Beispiel: 1 Cent pro 10.000 Tokens = 0,01‚Ç¨ pro 10K Tokens
        </div>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="tokenCostCurrency">W√§hrung</label>
        <select id="tokenCostCurrency" style="width: 120px;">
          <option value="EUR">‚Ç¨ Euro</option>
          <option value="USD">$ Dollar</option>
          <option value="CHF">CHF Franken</option>
        </select>
      </div>
    </div>

    <!-- Text-to-Speech -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        Sprachausgabe
      </h2>

      <div class="toggle-group">
        <div class="toggle-info">
          <div class="label">Text-to-Speech aktivieren</div>
          <div class="desc">Erm√∂glicht das Vorlesen von √úbersetzungen</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="enableTTS">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label for="ttsLanguage">Sprache f√ºr Sprachausgabe</label>
        <select id="ttsLanguage">
          <option value="de-DE">Deutsch</option>
          <option value="en-US">Englisch (US)</option>
          <option value="en-GB">Englisch (UK)</option>
          <option value="fr-FR">Franz√∂sisch</option>
          <option value="es-ES">Spanisch</option>
          <option value="it-IT">Italienisch</option>
        </select>
      </div>
    </div>

    <!-- Tastenk√ºrzel -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"/></svg>
        Tastenk√ºrzel
      </h2>

      <div class="shortcut-list">
        <div class="shortcut-item">
          <span>Auswahl √ºbersetzen</span>
          <kbd>Ctrl+Shift+T</kbd>
        </div>
        <div class="shortcut-item">
          <span>Seite √ºbersetzen</span>
          <kbd>Ctrl+Shift+P</kbd>
        </div>
        <div class="shortcut-item">
          <span>Side Panel √∂ffnen</span>
          <kbd>Ctrl+Shift+S</kbd>
        </div>
      </div>

      <p style="margin-top: 12px; font-size: 13px; color: var(--md-on-surface-medium);">
        Tastenk√ºrzel k√∂nnen in Chrome unter <strong>chrome://extensions/shortcuts</strong> angepasst werden.
      </p>
    </div>

    <!-- Ausgeschlossene Domains -->
    <div class="card">
      <h2>
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"/></svg>
        Ausgeschlossene Domains
      </h2>

      <div class="form-group">
        <label for="excludedDomains">Domains (eine pro Zeile)</label>
        <div class="description">Die Extension wird auf diesen Domains nicht aktiv</div>
        <textarea id="excludedDomains" placeholder="example.com&#10;another-site.org"></textarea>
      </div>
    </div>

    <!-- Aktionen -->
    <div class="actions">
      <button class="btn btn-danger" id="resetBtn">
        <svg viewBox="0 0 24 24"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></svg>
        Zur√ºcksetzen
      </button>
      <button class="btn btn-primary" id="saveBtn">
        <svg viewBox="0 0 24 24"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>
        Speichern
      </button>
    </div>

    <footer>
      <p>Smart Translator v3.0 ¬∑ <a href="https://github.com/LibreTranslate/LibreTranslate" target="_blank">LibreTranslate</a> ¬∑ <a href="https://lmstudio.ai" target="_blank">LM Studio</a></p>
    </footer>
  </div>

  <script src="options.js"></script>
</body>
</html>
